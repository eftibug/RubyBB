= paginate @topics

%table.table.table-striped
  %tr
    %th= t('.topics')
    %th.number.hidden-phone= t('.messages')
    %th.number.hidden-phone= t('.views')
    %th.hidden-portrait-phone= t('.last')
  - @topics.each do |topic|
    %tr
      %td
        = link_to topic do
          %p
            - if current_user && current_user.new_message(topic)
              %i.icon-bookmark{title: t('.new_messages')}
            = topic.name
        %p
          = t('common.by')
          = username topic.user, @forum.id
          - if topic.messages_count > 20
            â€“
            = link_to t('.last_page'), topic_path(topic, page: topic.last_page)
      %td.number.hidden-phone
        %p= topic.messages_count
      %td.number.hidden-phone
        %p= topic.views_count
      %td.infos.hidden-portrait-phone
        - if topic.messages.any?
          %p= l topic.updated_at, format: :short
          %p
            = t('common.by')
            = username topic.updater, @forum.id

= paginate @topics
